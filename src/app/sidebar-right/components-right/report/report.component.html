<!-- Placeholder html -->

<h3>Completed workflows:</h3>

<div *ngFor="let data of workflowData; let i = index"> 
    <h4>{{data.title}}</h4>
    <!-- Display Map -->
    <div *ngIf="data.outputs.layers" id="{{ 'reportMap' + i }}" class="reportMap"></div>
    <div *ngFor="let output of data.outputs | keyvalue">
        <!-- Click Point -->
        <li *ngIf="output.key=='clickPoint'">Clicked Point (Latitude, Longitude): ({{output.value.lat | number : '1.5'}}, {{output.value.lng | number : '1.5'}})</li>
        <!-- Example Workflow -->
        <li *ngIf="output.key=='selectColor'">Color Selected: {{output.value}}</li>
        <li *ngIf="output.key=='enterText'">Text Entered: {{output.value}}</li>
        <!-- Delineation -->
        <li *ngIf="output.key=='selectDelineationProcess'">Delineation Process: {{output.value}}</li>
        <!-- Query Basin -->
        <li *ngIf="output.key=='basinArea'">Drainage Area: {{output.value | number : '1.3'}} sq mi</li>
        <li *ngIf="output.key=='burnYears'">Burn Year Range: {{output.value[0]}} to {{output.value[1]}}</li>
        <li *ngIf="output.key=='burnedArea'">Burned Area: {{output.value[0] | number : '1.3'}} sq mi ({{output.value[1] | number : '1.3'}}%)</li>
        <li *ngIf="output.key=='geologyInfo'"> Geology Report:
            <ul><table>
                <tr>
                    <th>Geologic Unit</th>
                    <th>Area (sq mi)</th>
                    <th>Area (%)</th>
                </tr>
                <tr *ngFor="let geology_type of workflowData[i].outputs.geologyInfo">
                    <td>{{geology_type[0]}}</td>
                    <td>{{geology_type[1] | number : '1.3'}}</td>
                    <td>{{geology_type[2] | number: '1.3'}}</td>
                </tr>
            </table>
            </ul>
            
        </li>

        <!-- Query Fire Perimeters-->
        <li *ngIf="output.key=='selectedPerimetersInfo'"> Selected Perimeters Information:
            <span *ngFor="let perimeter of workflowData[i].outputs.selectedPerimetersInfo">
                <ul>
                    <li>{{perimeter.Key}}:</li>
                    <div *ngFor="let feat of perimeter.Data.features; let k = index">
                        <ul>
                            <li>Feature {{k+1}}</li>
                            <span *ngFor="let prop of feat.properties | keyvalue">
                                <ul  *ngIf="shownFields.indexOf(prop.key.toUpperCase()) > -1">
                                    <li>{{prop.key}}: {{prop.value}}</li>
                                </ul>
                            </span> 
                        </ul>
                    </div>
                </ul>
            </span>
        </li>
    </div>
</div>
